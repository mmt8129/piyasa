<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>PWA FINANS</title>
    <style>
        body { font-family: sans-serif; background: #f0f2f5; margin: 0; padding: 10px; }
        .container { display: flex; flex-direction: column; gap: 10px; }
        .card { background: white; padding: 15px; border-radius: 12px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); display: flex; justify-content: space-between; align-items: center; }
        .info { display: flex; flex-direction: column; }
        .title { font-weight: bold; font-size: 1.1rem; color: #333; }
        .time { font-size: 0.7rem; color: #888; }
        .prices { text-align: right; }
        .buy { color: green; font-weight: bold; display: block; }
        .sell { color: red; font-weight: bold; display: block; }
        .header { text-align: center; font-weight: bold; padding: 10px; color: #2c3e50; }
    </style>
</head>
<body>

    <div class="header">GÜNCEL PİYASA VERİLERİ</div>
    
    <div class="container" id="data-container">
        <div class="card"><span>Veriler Çekiliyor...</span></div>
    </div>

    <script>
        // Ücretsiz CORS Köprüsü (Proxy)
        const PROXY = "https://api.allorigins.win/get?url=";
        const GOLD_URL = encodeURIComponent('https://static.altinkaynak.com/public/Gold');
        const CURR_URL = encodeURIComponent('https://static.altinkaynak.com/public/Currency');

        async function fetchData() {
            try {
                const [goldRes, currRes] = await Promise.all([
                    fetch(PROXY + GOLD_URL).then(r => r.json()).then(d => JSON.parse(d.contents)),
                    fetch(PROXY + CURR_URL).then(r => r.json()).then(d => JSON.parse(d.contents))
                ]);

                const gram = goldRes.find(item => item.Kod === "GA");
                const usd = currRes.find(item => item.Kod === "USD");
                const eur = currRes.find(item => item.Kod === "EUR");

                const items = [
                    { ad: "GRAM ALTIN", veri: gram },
                    { ad: "DOLAR", veri: usd },
                    { ad: "EURO", veri: eur }
                ];

                render(items);
            } catch (err) {
                document.getElementById('data-container').innerHTML = "Hata oluştu, tekrar deneyin.";
                console.error("Hata:", err);
            }
        }

        function render(items) {
            const container = document.getElementById('data-container');
            container.innerHTML = '';
            
            items.forEach(item => {
                const html = `
                    <div class="card">
                        <div class="info">
                            <span class="title">${item.ad}</span>
                            <span class="time">${item.veri.GuncellenmeZamani}</span>
                        </div>
                        <div class="prices">
                            <span class="buy">ALIŞ: ${item.veri.Alis}</span>
                            <span class="sell">SATIŞ: ${item.veri.Satis}</span>
                        </div>
                    </div>`;
                container.innerHTML += html;
            });
        }

        fetchData();
    </script>
</body>
</html>
